<script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
<video id="camera" autoplay="true"></video>
<script>
    const video = document.querySelector("#camera");

    // Get user media (camera) stream
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(function(stream) {
            // Assign the camera stream to the video element
            video.srcObject = stream;
        })
        .catch(function(err) {
            console.error("Camera access error:", err);
        });

    Quagga.init({
        inputStream: {
            name: "Live",
            type: "LiveStream",
            target: video, // Use the video element as the target
        },
        decoder: {
            readers: ["ean_reader", "code_128_reader", "code_39_reader", "UPCA_reader"]
        },
    }, function(err) {
        if (err) {
            console.error("Quagga initialization failed:", err);
            return;
        }
        Quagga.start();
    });

</script>
